pipeline {
    agent {
    label 'dev'
    }
    stages {
        stage('aws_configure') {
            steps {
                sh 'java -version'
                sh 'mvn -version'
            }
        }
        stage('gitcheckout') {
            steps {
                echo "cloning git repository"
                checkout scm
            }
        
        }
        stage('app_build') {
            steps {
                echo "clean build application"
                 dir('javamultistage') {
                   sh 'mvn clean package -DskipTests'
        }            
        }
        }
        stage('Running application') {
            steps {
                echo " Running java application"
                sh 'java -jar target/demo-0.0.1-SNAPSHOPT.jar'
            }
            }
        }
    }